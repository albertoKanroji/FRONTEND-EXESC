<div class="grid p-fluid">
    <div class="col-12 md:col-12">
        <div class="card">
            <div class="flex-container">
                <h5>{{ isEdit ? "Editar" : "Crear" }} Actividad</h5>
                <button
                    pButton
                    label="{{ isEdit ? 'Editar' : 'Crear' }}"
                    class="p-button-outlined mb-2"
                    icon="pi pi-check"
                    (click)="onSubmit()"
                ></button>
            </div>
            <form [formGroup]="actividadForm" class="grid formgrid">
                <div class="col-12 mb-2 lg:col-4 lg:mb-0">
                    <span class="p-input-icon-left">
                        <i class="pi pi-user"></i>
                        <input
                            type="text"
                            pInputText
                            placeholder="Cupo"
                            formControlName="quota_limit"
                        />
                    </span>
                </div>
                <div class="col-12 mb-2 lg:col-4 lg:mb-0">
                    <p-dropdown
                        [options]="periodos"
                        formControlName="periods_id"
                        placeholder="Periodo"
                    ></p-dropdown>
                </div>
                <div class="col-12 mb-2 lg:col-4 lg:mb-0">
                    <p-dropdown
                        [options]="actividades"
                        formControlName="activities_id"
                        placeholder="Actividad"
                    ></p-dropdown>
                </div>
                <div class="col-12 mb-2 lg:col-4 lg:mb-0">
                    <p-dropdown
                        [options]="docentes"
                        formControlName="teachers_id"
                        placeholder="Docente"
                    ></p-dropdown>
                </div>
                <div class="col-12 mb-2 lg:col-4 lg:mb-0">
                    <p-dropdown
                        [options]="tipoGrupos"
                        formControlName="type_of_groups_id"
                        placeholder="Tipo de Grupo"
                    ></p-dropdown>
                </div>
                <div class="col-12 mb-2 lg:col-4 lg:mb-0">
                    <input
                        type="text"
                        pInputText
                        placeholder="Ubicación"
                        formControlName="location"
                    />
                </div>
                <div class="col-12">
                    <h5>Horarios</h5>
                    <button type="button" (click)="addSchedule()">
                        Agregar Horario
                    </button>
                    <div formArrayName="schedules">
                        <div
                            *ngFor="
                                let schedule of schedules.controls;
                                let i = index
                            "
                            [formGroupName]="i"
                        >
                            <div>
                                <label for="day">Día</label>
                                <select formControlName="day">
                                    <option
                                        *ngFor="let day of daysOfWeek"
                                        [value]="day.value"
                                    >
                                        {{ day.label }}
                                    </option>
                                </select>
                            </div>
                            <div>
                                <label for="start_time">Hora de inicio</label>
                                <input
                                    type="time"
                                    formControlName="start_time"
                                />
                            </div>
                            <div>
                                <label for="end_time">Hora de fin</label>
                                <input type="time" formControlName="end_time" />
                            </div>
                            <button type="button" (click)="removeSchedule(i)">
                                Eliminar horario
                            </button>
                        </div>
                    </div>

                    <button type="button" (click)="addSchedule()">
                        Añadir horario
                    </button>
                </div>
            </form>
        </div>
    </div>
    <ngx-loading
        [show]="loading"
        [config]="{ backdropBorderRadius: '3px' }"
    ></ngx-loading>
</div>
